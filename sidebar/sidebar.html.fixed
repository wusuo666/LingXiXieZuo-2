<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>灵犀协作侧边栏</title>
    <!-- 添加marked.js库 -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <div class="tab-container">
        <div class="tab-header">
            <button class="tab-button active" data-tab="collab-area">协作区</button>
            <button class="tab-button" data-tab="history">History</button>
            <button class="tab-button" data-tab="canvas">Canvas</button>
        </div>
        <div class="tab-content">
            <div class="tab-pane active" id="collab-area">
                <div class="inner-tab-container">
                    <div class="inner-tab-header">
                        <button class="inner-tab-button active" data-inner-tab="chat">聊天室</button>
                        <button class="inner-tab-button" data-inner-tab="agent">Agent</button>
                        <button class="inner-tab-button" data-inner-tab="settings">设置</button>
                    </div>
                    <div class="inner-tab-content">
                        <div class="inner-tab-pane active" id="chat">
                <div class="chat-pane live-share-style">
                    <div class="chat-server-controls">
                        <div class="server-status">
                            <span>服务器状态: </span>
                            <span id="chat-server-status" class="status-offline">离线</span>
                        </div>
                        <div class="connection-modes">
                            <button id="host-mode-btn" class="mode-button active">主机模式</button>
                            <button id="client-mode-btn" class="mode-button">从机模式</button>
                        </div>
                        <div id="host-mode-panel" class="mode-panel">
                            <div class="server-actions">
                                <button id="start-chat-server" class="action-button">启动聊天室</button>
                                <button id="stop-chat-server" class="action-button" disabled>停止聊天室</button>
                            </div>
                            <div class="server-connection" style="display: none;" id="server-connection-info">
                                <div class="connection-display">
                                    <span>连接地址: </span>
                                    <span id="server-connection-url">未连接</span>
                                </div>
                                <button id="copy-connection" class="action-button">复制连接信息</button>
                            </div>
                        </div>
                        <div id="client-mode-panel" class="mode-panel" style="display: none;">
                            <div class="client-connection">
                                <div class="input-group">
                                    <input type="text" id="server-address" placeholder="服务器地址 (如: 192.168.1.100)" />
                                    <input type="text" id="server-port" placeholder="端口 (如: 3000)" value="3000" />
                                </div>
                                <div class="connection-actions">
                                    <button id="connect-to-server" class="action-button">连接服务器</button>
                                    <button id="disconnect-from-server" class="action-button" disabled>断开连接</button>
                                </div>
                                <div class="room-actions" style="margin-top: 6px; display: none;" id="room-control">
                                    <div class="room-info">
                                        <span>当前房间:</span>
                                        <span id="current-room-id">default</span>
                                    </div>
                                    <button id="leave-room" class="action-button">离开聊天室</button>
                                </div>
                            </div>
                        </div>
                        <div class="user-settings">
                            <input type="text" id="user-name" placeholder="输入用户名..." />
                            <button id="set-username" class="action-button">设置用户名</button>
                        </div>
                    </div>
                    <div class="chat-messages">
                        <div class="chat-row left">
                            <div class="chat-avatar-group">
                                <div class="avatar">A</div>
                                <div class="sender">协作助手</div>
                            </div>
                            <div class="chat-bubble-group">
                                            <div class="chat-bubble left">你好，欢迎使用灵犀协作！有什么可以帮到你？</div>
                                            <div class="chat-time">10:01</div>
                            </div>
                        </div>
                        <div class="chat-row right">
                            <div class="chat-avatar-group">
                                <div class="avatar">我</div>
                                <div class="sender">我</div>
                            </div>
                            <div class="chat-bubble-group">
                                            <div class="chat-bubble right">你好！请问这个工具有哪些功能？</div>
                                            <div class="chat-time">10:02</div>
                            </div>
                        </div>
                    </div>

                    <!-- 语音会议组件 -->
                    <div class="voice-conference-container">
                        <div class="voice-conference-header">
                            <h3>语音会议</h3>
                            <div class="voice-conference-status">未连接</div>
                        </div>
                        
                        <div class="voice-conference-controls">
                            <button id="create-conference-btn" class="conference-btn">创建会议</button>
                            <button id="join-conference-btn" class="conference-btn">加入会议</button>
                            <button id="leave-conference-btn" class="conference-btn" disabled>离开会议</button>
                        </div>
                        
                        <div class="conference-join-form" style="display: none;">
                            <input type="text" id="conference-id-input" placeholder="输入会议ID">
                            <button id="confirm-join-btn">确认加入</button>
                            <button id="cancel-join-btn">取消</button>
                        </div>
                        
                        <div class="active-conference-info" style="display: none;">
                            <div class="conference-id-display">会议ID: <span id="current-conference-id"></span></div>
                            <div class="mic-control">
                                <button id="toggle-mic-btn">静音</button>
                                <div class="mic-status">麦克风已开启</div>
                            </div>
                        </div>
                        
                        <div class="conference-participants">
                            <h4>参与者</h4>
                            <ul id="participants-list"></ul>
                        </div>
                    </div>

                    <div class="chat-input-bar">
                        <input type="text" id="chat-input" class="chat-input" placeholder="输入消息..." />
                        <div class="voice-record-timer">00:00</div>
                        <button id="voice-record-btn" class="voice-record-btn" title="录制语音消息">🎤</button>
                        <button id="chat-send" class="chat-send">发送</button>
                                </div>
                            </div>
                        </div>
                        <div class="inner-tab-pane" id="agent">
                            <!-- 省略其他内容 -->
                        </div>
                        <div class="inner-tab-pane" id="settings">
                            <!-- 省略其他内容 -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="history">
                <!-- 省略其他内容 -->
            </div>
            <div class="tab-pane" id="canvas">
                <!-- 省略其他内容 -->
            </div>
        </div>
    </div>
    
    <script src="sidebar.js"></script>
</body>
</html>